{"ts":1361557980500,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var express = require ('express');\nvar server = express();\n  \nvar ericomServer='http://10.81.108.10:8080/AccessNow/start.html';\n\nserver.configure(function() {\n    server.use(express.bodyParser());\n    server.use(express.cookieParser());\n    server.use(express.session({secret: 'my super secret'}));\n    });\n\nserver.use(express.static(__dirname + '/website'));\nserver.use(express.static(__dirname + '/scripts'));\n\nserver.post('/set', function (req, res) {\n    console.log('test called');\n    req.session.username = req.body.name;\n    res.send('set ok');\n});\n\nserver.get('/read', function(req, res) {\n   if(req.session.username)\n   {\n       res.send(req.session.username);\n   } \n   else\n   {\n       res.send('no data');\n   }  \n});\n\nserver.post('/login', function(req, res) {\n    console.log('login');\n    // do login stuff\n\n    res.redirect('/calder.html');\n});\n\nserver.get('/launch/:app', function(req, res) {\n    console.log('launch called');\n    console.log('Cookies: '+req.cookies);\n    console.log('App: '+req.params.app);\n\n    res.cookie('EAN_username', 'administrator');\n    res.cookie('EAN_password', 'cisco123!');\n    res.cookie('EAN_autostart', 'true');\n    res.cookie('EAN_remoteapplicationmode', 'true');\n\n    var appPath;\n    switch (req.params.app) {\n        case 'aptana': {\n            appPath = '\"C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Aptana Studio 3\\\\AptanaStudio3.exe\"';\n            break;\n        };\n\tcase 'desktop': {\n\t    res.cookie('EAN_remoteapplicationmode', 'false');\n            console.log('Launching: desktop');\n\t    break;\n\t}\n\tdefault: {\n\t    appPath = req.params.app;\n\t};\n    };\n\n    if (appPath) {\n\tconsole.log('Launching: ' + appPath);\n        res.cookie('EAN_alternate_shell', appPath);\n    }\n\n    res.redirect(ericomServer);\n});\n\n\n// listen\nvar port = process.env.PORT || 3000;\nserver.listen(port, function () {\n\tconsole.log('Calder Demo - listening on '+port);\n});\n\n"]],"start1":0,"start2":0,"length1":0,"length2":1904}]],"length":1904}
